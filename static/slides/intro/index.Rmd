---
title: "01 Introduction to Shiny"
subtitle: "Starting with the basics"
author: "Mitchell O'Hara-Wild"
date: '04/11/2019'
output:
  xaringan::moon_reader:
    css: ["libs/slides.css", "libs/hex.css", "libs/animate.css"]
    seal: false
    nature:
      highlightStyle: solarized-dark
      ratio: '16:9'
      highlightLines: true
      countIncrementalSlides: false 
      beforeInit: ["./libs/jquery/jquery.min.js", "./libs/slides.js", "https://platform.twitter.com/widgets.js"]
      slideNumberFormat: "%current%"
---
background-image: url("resources/title.jpg")
background-size: cover

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE, width = 120)

library(tidyverse)
library(shiny)
library(countdown)
library(fontawesome)

theme_set(
  theme_grey(base_size = 16) +
  theme(
    legend.position = "bottom",
    plot.background = element_rect(fill = "transparent"),
    legend.background = element_rect(fill = "transparent")
  )
)
```


```{css, echo=FALSE}
/* custom.css */
.left-code {
  color: #777;
  width: 40%;
  height: 92%;
  float: left;
}
.right-plot {
  width: 58%;
  float: right;
  padding-left: 1%;
}
```

<ul class="hextile clr">
	<li>
    <div>
      <h1>01</h1>
      <p style = "padding-top: 20%; font-size: 1.5em">Intro to Shiny</p>
    </div>
  </li>
  <li>
    <img src="resources/shiny.svg" alt=""/>
  </li>
  <li></li>
  </li>
  <li>
    <div>
      <p style = "padding-top: 15%; font-size: 1.33em">
      Mitchell O'Haraâ€‘Wild<br>
      (Nectric)
      </p>
    </div>
  </li>
</ul>

.footnote[
Materials at [workshop.nectric.com.au/intermediate-shiny](https://workshop.nectric.com.au/intermediate-shiny)
]

---
class: left-side

.pull-left.center.bg-blond[

.portrait[
![](resources/avatar.jpg)
]

### Mitchell O'Hara-Wild

### Nectric

[`r fa("github")` @mitchelloharawild](https://github.com/mitchelloharawild)

[`r fa("twitter")` @mitchoharawild](https://twitter.com/mitchoharawild)

]

.pull-right[
# Welcome, whoami?

- `r emo::ji("mortar_board")` Teaches R data skills at Monash University
- `r emo::ji("bar_chart")` Data consulting at Nectric
- `r emo::ji("chart_with_upwards_trend")` Specialised in time series
- `r emo::ji("package")` Develops R packages
- `r emo::ji("bee")` Enjoys beekeeping and permaculture

<img src="resources/hex.png" alt="package hex stickers", style="width:80%"></img>
]

---
class: feature

# `r emo::ji("shooting_star")` Your turn!

--

.box-12[

.float-right.portrait[
?
]

## Introduce yourself! `r emo::ji("woman")` `r emo::ji("man")`

Briefly say a bit about you, including:

* Your preferred name
* Your specialisation
* A hobby or interest

]

---

.pull-left[
Workshop day 1

| Time          | Activity                                                      |
|:--------------|:--------------------------------------------------------------|
| 09:00 - 09:30 | Arrive and get set up `r emo::ji("computer")`                              |
| 09:30 - 10:45 | Session 1 `r emo::ji("sparkles")` <br> *Introduction to Shiny*             |
| 10:45 - 11:00 | *Morning tea* `r emo::ji("tea")`                                    |
| 11:00 - 12:30 | Session 2 `r emo::ji("boom")` <br> *Reactive programming I*                |
| 12:30 - 13:15 | *Lunch* `r emo::ji("fork_and_knife")`                                      |
| 13:15 - 14:45 | Session 3 `r emo::ji("trophy")` <br> *Troubleshooting and testing*         |
| 14:45 - 15:00 | *Q&A break* `r emo::ji("question")`                                        |
| 15:00 - 16:30 | Session 4 `r emo::ji("boom")` <br> *Reactive programming II*               |

]

.pull-right[
Workshop day 2

| Time          | Activity                                                      |
|:--------------|:--------------------------------------------------------------|
| 09:00 - 09:30 | Arrive and get set up `r emo::ji("computer")`                          |
| 09:30 - 10:45 | Session 1 `r emo::ji("art")` <br> *Application design and customisation*   |
| 10:45 - 11:00 | *Morning tea* `r emo::ji("tea")`                                           |
| 11:00 - 12:30 | Session 2 `r emo::ji("link")` <br> *Doing more with extension packages*    |
| 12:30 - 13:15 | *Lunch* `r emo::ji("fork_and_knife")`                                      |
| 13:15 - 15:00 | Session 3 `r emo::ji("tada")` <br> *Work on your own Shiny app*            |
]

---
class: bg-yellow feature

# `r emo::ji("target")` Today's goals

.box-12.larger[
1. Identify useful **applications of shiny apps**
1. Learn how to **structure an app**
1. Understand **reactive programming**
1. **Troubleshoot errors** in apps
1. **Test apps** for potential bugs
]


---
class: topic-starter, center

# The basics of Shiny


---

class: left-side

.pull-left.center.bg-blond[

# What is Shiny?

.sticker-left[![shiny](resources/shiny.svg)]

]

--

.pull-right[
> Shiny is a framework for creating web applications using R code.
>
> [*Mastering Shiny*](https://mastering-shiny.org/)
]

--

.pull-right[
Shiny allows you to:

* Interactively explore data
* Use R code to perform analysis for web users
* Quickly & easily produce sophisticated apps
]

---

# I use shiny to...

1. Rapidly produce useful tools for the web
1. Allow non-programmers to use powerful R packages
1. Produce interactive learning experiences
1. Create dashboards for data management

--

.box-12.bg-blond[
In the eyes of most people, quickly creating a shiny app is magic `r emo::ji("sparkles")``r emo::ji("man_mage")`.
]

---
background-image: url("resources/hive_ss.png")
background-size: contain
background-position: top

.box-12.bg-blond.bottom-margin.center[
# Visualise native Australian bee sightings
https://shiny.mitchelloharawild.com/hive/
]

---
background-image: url("resources/grader_ss.png")
background-size: contain
background-position: top

.box-12.bg-blond.bottom-margin.center[
# Grade student's rmarkdown assignments
https://github.com/mitchelloharawild/ShinyGrader/
]

---
background-image: url("resources/ets_ss.png")
background-size: contain
background-position: top

.box-12.bg-blond.bottom-margin.center[
# Teaching statistical models
http://shiny.mitchelloharawild.com/shinyETS
]

---
background-image: url("resources/cooee_ss.png")
background-size: contain
background-position: top

.box-12.bg-blond.bottom-margin.center[
# Simplify evaluation of abstract submissions
https://github.com/useR-2018/cooee
]

---
background-image: url("resources/taipan_ss.png")
background-size: cover

.sticker-float[![](resources/taipan.png)]

.box-12.bg-blond.bottom-margin.center[
# Train & validate machine learning models
https://shiny.mitchelloharawild.com/nothotdog/
]

---
background-image: url("resources/isi_ss.png")
background-size: contain
background-position: top

.box-12.bg-blond.bottom-margin.center[
# Improving a conference scheduler
https://www.isi2019.org/scientific-programme-2/
]


---
background-image: url("resources/wsc_ss.png")
background-size: contain
background-position: top

.float-right[
<blockquote class="twitter-tweet" data-dnt="true"><p lang="en" dir="ltr">This is muuuuuch better than the website!</p>&mdash; Stats for bios (@StatsForBios) <a href="https://twitter.com/StatsForBios/status/1162773293356736514?ref_src=twsrc%5Etfw">August 17, 2019</a></blockquote>
]

.box-12.bg-blond.bottom-margin.center[
# Improving a conference scheduler
http://shiny.mitchelloharawild.com/wsc2019
]

---


# Basic components of a shiny app

```r
library(shiny)
ui <- fluidPage(
  "Hello, world!"
)
server <- function(input, output, session) {
  # Nothing to see here!
  # All this app does is say "Hello, world!"
}
shinyApp(ui, server)
```

--

The simplest app consists of a **UI** and **server**, in a single file: `app.R`.

- The UI controls the layout and style
- The server controls the behaviour

---
class: feature

# `r emo::ji("shooting_star")` Your turn!

.box-12[

## Starter shiny app `r emo::ji("mag")`

Run the 'Hello World!' app using code from the previous slide.

1. Copy the code into a new `app.R` file
1. Launch the app using the **Run App** button ![button](resources/run_app.png)
1. Close the app using the stop button `r emo::ji("stop_sign")`

If you have time, modify the app to say hello to you.

]

```{r, echo = FALSE}
countdown(minutes = 2L)
```


---
class: center

# Where does this app live?

```r
runApp('hello_world')

#> Listening on http://127.0.0.1:5545
```
![App screenshot](resources/hello_world_ss.png)

--

## `r emo::ji("computer")` On the web? `r emo::ji("globe_with_meridians")`

Well, sort of! When running an app locally, your computer serves the app at a local address (`127.0.0.1` or `localhost`).

---
class: center

# View the app in a web browser

![Run external](resources/run_app_external.png)

When an app is ran locally, it is only accessible to you.

Deploying the app on a server allows others access the app without R.

---

# Adding inputs to the UI

Inputs allow users to provide information to control the app.

**UI**: All **inputs** functions follow a similar signature:

```{r}
textInput(
  inputId = "input_user_text", # ID to obtain text in server code
  label = "Display label", # Guide the user with what to input
  value = "Default text" # Initial value in the box
)
```

**Server**: The provided text for this box is accessible in the server code with:

```{r, eval = FALSE}
input$input_user_text # The provided inputId
```

<div class="remark-code-line"><code id="output_server_text" class="remark-code remark-inline-code">## [1] "Default text"</code></div>

---

# Adding outputs to the UI

Outputs return information from the server to the interface.

**UI**: All **output** functions also have similar arguments:

```{r}
textOutput(
  outputId = "output_server_text", # ID used by server code
)
```
My text from the server!

**Server**: The server provides output to the UI using **render** functions:

```{r, eval = FALSE}
output$output_server_text <- renderText({
  "My text from the server!"
  # You could use any R code here, perhaps even inputs like input$input_user_text
})
```

---
class: feature

# `r emo::ji("shooting_star")` Your turn!

.box-12[

## Hello you!

Extend the 'Hello World!' app to greet the user's name, rather than 'world'.

1. Add a text input field to provide the user's name
1. Replace the static 'Hello World!' text with a text output.
1. Add a text renderer to the server, which creates the output 'Hello {{name}}!'

If you have time, modify the app to say 'Good morning', 'Good afternoon' and 'Good night' based on `Sys.time()`

]

```{r, echo = FALSE}
countdown(minutes = 5L)
```

---
background-image: url("resources/cheatsheet.png")
background-size: contain
background-position: top

.box-12.bg-blond.bottom-margin.center[
# `r emo::ji("book")` Shiny cheatsheet `r emo::ji("book")`
# (Inputs and outputs galore)
https://shiny.rstudio.com/images/shiny-cheatsheet.pdf
]

---

# Look at a more complicated app

---

# Customise this app with a new input which changes the output

Some ggplot2 output, change aesthetics.

---

# Changing the layout of an app

---

# File structure for Shiny apps

---

Break time.

Get some coffee, you'll need to be wide awake for the next topic: reactivity.
